    
<html>
<head>
	<title></title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div id="pendWrap">
  <div id="pend">
  </div>
</div>
	<style>
		@import "bourbon";

#pendWrap{
		position: absolute;
		top: 0;
		left: 50%;
   margin-left: -50px;
		border: 1px solid red;
	}
	
	#pend {
		position: relative;
		top: 200px;
		left: 0;
		width: 100px;
		height: 100px;
		border-radius: 12px;
		background: green;	
	}
	</style>
	<script>
		
		var orientation;

function doOnOrientationChange() {
  
  switch (window.orientation) {
		case -90:
        orientation = "landscape_clockwise"
        break;
		case 90:
			//landscape
			orientation = 'landscape_anticlockwise';
			break;
		default:
			//portrait;
			orientation = 'portrait';
			break;
	}
}




var deviceOrientation = {
	ax: 0,
	ay: 0,
	az: 0,
	rotation: 0,
	arAlpha: 0,
	arBeta: 0,
	arGamma: 0
};
window.ondevicemotion = function(event) {
	deviceOrientation.ax = event.accelerationIncludingGravity.x
	deviceOrientation.ay = event.accelerationIncludingGravity.y
	deviceOrientation.az = event.accelerationIncludingGravity.z
	deviceOrientation.rotation = event.rotationRate;
	if (deviceOrientation.rotation != null) {
		deviceOrientation.arAlpha = Math.round(deviceOrientation.rotation.alpha);
		deviceOrientation.arBeta = Math.round(deviceOrientation.rotation.beta);
		deviceOrientation.arGamma = Math.round(deviceOrientation.rotation.gamma);
	}
}

// shim layer with setTimeout fallback
window.requestAnimFrame = (function() {
	return window.requestAnimationFrame ||
		window.webkitRequestAnimationFrame ||
		window.mozRequestAnimationFrame ||
		window.oRequestAnimationFrame ||
		window.msRequestAnimationFrame ||
		function(callback) {
			window.setTimeout(callback, 1000 / 60);
		};
})();




var startR = 0,
	accel = 0.24,
	decel = 0.75,
	divider = 2;

var position = {
		'rotation': 0
	},
	vr = 0,
	pr = 0,
	elasticity = 0.9,
	strength = 0.03,
	target = {
		'rotation': 0
	};

function render() {
	//this can be expanded on to take rotating into the "opposite" landscape direction.
  
  switch(orientation){
    case "landscape_clockwise":
        target.rotation = (deviceOrientation.ax * 7);
      break;
    case "landscape_anticlockwise":
      target.rotation = -(deviceOrientation.ax * 7);
      break;
    
    default:
      target.rotation = deviceOrientation.ax * 7;
      
      
  }
  
  
	
	vr = target.rotation - position.rotation;
	pr = pr * elasticity + vr * strength;
	position.rotation += pr;

	$('#pendWrap').css({
		'transform': 'rotate(' + position.rotation + 'deg)'
	});
}

// usage: 
// instead of setInterval(render, 16) ....
(function animloop() {
	requestAnimFrame(animloop);
	render();
})();

document.addEventListener("orientationchange", function(){
  doOnOrientationChange();
});
doOnOrientationChange();

	</script>
</body>
</html>
